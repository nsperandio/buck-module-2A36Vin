* C:\Users\nicol\Documents\Projects\buck-module-2A40Vin\sim\buck.wxsch
.node_map VIN 26
.node_map I_flt 29
.node_map VOUT 27
.node_map IIN 28
.node_map V_flt 30
.ac DEC 50 10 100k
.print  ALL
.options PSP_NPT=100001 POP_ITRMAX=20 POP_OUTPUT_CYCLES=5 SNAPSHOT_INTVL=0 SNAPSHOT_NPT=11
+ MIN_AVG_TOPOLOGY_DUR=1a AVG_TOPOLOGY_DUR_MEASUREMENT_WINDOW=128
.pop  TRIG_GATE=X1.!D_CYCLE  TRIG_COND=0_TO_1  MAX_PERIOD=5u  CONVERGENCE=1p  CYCLES_BEFORE_LAUNCH=5
+  TD_RUN_AFTER_POP_FAILS=-1
C1 27 0 30u
C3 30 25 20u
C4 30 0 10u
X$D1 0 19 DIODE_SPICE_V3$1
E1 18 19 17 0 1
X$H1 28 0 16 26 H1$TP_CCVS$2
X$H2 29 0 24 30 H2$TP_CCVS$3
I1 0 24 AC 1 0
L1 19 27 10u
L3 22 23 47u
.PRINT V(#VIN)
.PRINT V(#IIN)
.GRAPH "db(:#VIN/:#IIN)" GUID="da3a0580-317f-45be-ac06-1bca948d45b0" Curvelabel="Gain
+ Buck" nowarn=true yunit="dB" complete=True analysis="ac" ylog=lin xlog=auto  ydelta=20
+ persistence=-1 colourname=Probe1_bode_color   axistype=grid axisname=bodemag order=0
+    userid=Probe1$GAIN. MeasureSpec="Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0"
.post_process probe_measure Probe1$GAIN. Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0
.GRAPH "ph(:#VIN/:#IIN)" Curvelabel="Phase Buck" nowarn=true yunit="degrees" complete=True
+ analysis="ac" ylog=lin xlog=auto  ydelta=45 persistence=-1 colourname=Probe1_bode_color
+    axisname=bodephase order=1    userid=Probe1$PHASE. MeasureSpec="Phase\sMargin\s(Phase\sPlot)|0|0|0|0"
.post_process probe_measure Probe1$PHASE. Phase\sMargin\s(Phase\sPlot)|0|0|0|0
.PRINT V(#V_flt)
.PRINT V(#I_flt)
.GRAPH "db(:#V_flt/:#I_flt)" GUID="ef51d3fa-f136-4f4d-a929-da9758f7b98f" Curvelabel="Gain
+ Filter" nowarn=true yunit="dB" complete=True analysis="ac" ylog=lin xlog=auto  ydelta=20
+ persistence=-1 colourname=Probe3_bode_color   axistype=grid axisname=bodemag order=0
+    userid=Probe3$GAIN. MeasureSpec="Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0"
.post_process probe_measure Probe3$GAIN. Gain\sCrossover\sFrequency\s(dB\sPlot)|0|0|0|0!Gain\sMargin\s(dB\sPlot)|0|0|0|0
.GRAPH "ph(:#V_flt/:#I_flt)" Curvelabel="Phase Filter" nowarn=true yunit="degrees"
+ complete=True analysis="ac" ylog=lin xlog=auto  ydelta=45 persistence=-1 colourname=Probe3_bode_color
+    axisname=bodephase order=1    userid=Probe3$PHASE. MeasureSpec="Phase\sMargin\s(Phase\sPlot)|0|0|0|0"
.post_process probe_measure Probe3$PHASE. Phase\sMargin\s(Phase\sPlot)|0|0|0|0
X$Q1 26 18 19 PWR_NMOS_SPICE_V3$4
R1 27 0 2.5
R2 30 23 230m
R3 25 0 40m
V1 20 0 19
X$V2 17 0 PUL_SOURCE$5
V4 16 20 AC 1
V5 22 0 19
X1 17 21 PERIODIC_OP$6
.subckt PERIODIC_OP$6  1 3
.NODE_MAP IN 1
.NODE_MAP OUT 3
!D_CYCLE 3 0 1 302 M1M IC=0
VREF 302 0 DC 2.5
.MODEL M1M COMP RIN=10MEG ROUT=50 VOL=0 VOH=5  HYSTWD=0.002 DELAY=0
.ends PERIODIC_OP$6

.subckt PUL_SOURCE$5  1 2
.NODE_MAP P 1
.NODE_MAP N 2
V1 1 2 PUL   V1=0   V2=20   FREQ=500000   T_RISE=2e-09   T_FALL=2e-09   PWIDTH=5.98e-07
+   DELAY=0   OFF_UNTIL_DELAY=NO   IDLE_IN_POP=NO
.ends PUL_SOURCE$5

.subckt PWR_NMOS_SPICE_V3$4  1 2 3
.NODE_MAP D 1
.NODE_MAP G 2
.NODE_MAP S 3
X_DEBUG 1 2 3 PWR_MOS_DEBUG_SPICE_V3$7
X1_BASE 1 2 3 PWR_MOS_BASE_SPICE_V3$8
?@@--START ENCRYPTION: "PWR_MOS_BASE_SPICE_V3"
?@@/bZ+bwF56vkgz2xD3Lbk/98W3PnIYQRxcsj9UkfSVf0RTC5V0HU3emtR5ao8qsuSYmjs?##
?@@7jVgQLjO2WVE/MGbxQjigqZBa62tSm4J17oeuC0ajl+BVw7trtL2K0U4aAFL/5/JirpL?##
?@@Y4r8R6aDjyFuT7/YYb8HvDXq19evCb+K7IFZSki1v6w44kl7T7cYnpCpaW3GSekK2ZwP?##
?@@zBHviEfLv5KqWxbJR9uKuk/eE+MVIjyX17HK56QnyeTyuukVltcc/XZscnHWLQcOSWNG?##
?@@jfM9yeBkJoz1p6ONZEzw2PoqvRRrLiOjjOs3n5e46lz1QeTXyJztR+53HLg2kr0M4Ke+?##
?@@lkDo5B7t2pH+48BkRbc8RqWFT/wrQDnkiJpygb7nm9IJdiYL/K/n8l39JPrMPHqYoe64?##
?@@w8NEbatdd2pMI0W17K0MDtBJ0g2PBisv1eT8YBtIbkWgPIxLOnYA110QDaR6glMQRjkK?##
?@@dBxfJ9dRB3qW0lAy0851TllXWbetL4FB0rF0L0JI+SLy0heE/U6umWep6BArKZntgLaF?##
?@@MdxgB9sa26Afq8Cx2kCfjZSCiaFcAqThN9F0UWhm90NHY1AUkbsIKQ2r6rvoRo+7PXFY?##
?@@Co14kE2QNyRHE6w4p8KHAwBJ6F5+sf6LUSaw1J5O9wYPJLROeee/Hg33pWcXpBTrvCcq?##
?@@L8s6Vvl5T52Nk8QLlTEeiOXdD41NUcsSm1xDXzfeWxKA8o4r90rwOzL92ryy33vlg0rb?##
?@@wKoKZHO7JDKcUmw+J3oaojC3EwyIBLDrt/UXdFilTFJLUJ6tq0S+oT9MfcArUI6C9F8g?##
?@@AT/MdZk99O1KfUvQ/dsbb0f75Tnxt7eoGgUjj2vIF6ldA1UNudpnljTdkx3tarsvZq5J?##
?@@Hjn1eHdbu5ANDyxi+rVDMwS0syE3gl4odzBUZJW1XnCEEog9rgtYaYZjyEFN67IBUn2G?##
?@@B3M+h7vs72hpjEVsk+Lgw2M5VYlv84aL7lzsLCPiVgJq/rvv2FixaPHv5tamgRwverLP?##
?@@mFIPlWmK7lmuH4jw/K/hp4JK+vktslpR7BObgYYToHhbSxF/03/F4s5Sc3XeiWjvzcj4?##
?@@ab2NW9ceYFH22c5wZFwPJ+FOwtQSv6OBDDwpK25g0E7OONn6EivSoWc0DsNNhsl3baLX?##
?@@ygDJ11iTYsX2HC8MU8FoSMK7S5fXRuNMH8XliSboV0ZCuFPYiYuCk5N2bWsi9vBNGE9k?##
?@@ywjXMAnHmn4EHMdLhTOHUPO3oApOWogwlMJhC9LYFbEcGqj5EMyJoQw3jkdZ+I+ePCPT?##
?@@--END ENCRYPTION: "PWR_MOS_BASE_SPICE_V3", 21 lines
.subckt PWR_MOS_DEBUG_SPICE_V3$7  10 20 30
.ends PWR_MOS_DEBUG_SPICE_V3$7

.ends PWR_NMOS_SPICE_V3$4

.subckt H2$TP_CCVS$3  1 2 3 4
.node_map P 1
.node_map N 2
.node_map CP 3
.node_map CN 4
H1 1 2 V1 1
V1 3 4 0
.ends H2$TP_CCVS$3

.subckt H1$TP_CCVS$2  1 2 3 4
.node_map P 1
.node_map N 2
.node_map CP 3
.node_map CN 4
H1 1 2 V1 1
V1 3 4 0
.ends H1$TP_CCVS$2

.subckt DIODE_SPICE_V3$1  1 2
.NODE_MAP P 1
.NODE_MAP N 2
X_DEBUG 1 2 DIODE_SPICE_DEBUG_V3$10
X_BASE 1 2 DIODE_SPICE_BASE_V3$11
?@@--START ENCRYPTION: "DIODE_SPICE_BASE_V3"
?@@OBjNbldcxyF0Z0TmDR20p7Hx2hSMkUf8sxAtgXOEUekj8rml/n2jD863vUV6pH2GXA50?##
?@@lTi8iF3Teb4CBd4jSPtGkX+QF336pEdk762YoEvFV7luErUsa9ea/blQX/XpLSX+/+Io?##
?@@itnkvkmeFrNUfy8j1PhSDIssnn/D3/Vraz+fDSb6XkYV+DeKdJLzbfPpe/EFOCfiPi8Y?##
?@@szoS5yl5WwC8VbGaOGNA41Et4Ol3EH3iNlK2vlLhTmlQaLmHWl1NbaWVEOnD473T9sDz?##
?@@LLEBTes/2tFBKuP4ShESBwyQzOejL9aFOS4IYj7tIdgQ6V2JPMgVxqPLyHp1dss0zj9l?##
?@@0TxPQs3BDbkwm9ipFLmGCI+lDBSCbUmbBofVwvSLzPGwM5u/4akah9ULLUuYl0PCCsov?##
?@@noWBp0FLhdxLQIB40S9Umg9xyEqjwdfp2w/W84BaNqPNdYyIoCTB1n0jbX5roTk95eWf?##
?@@t1xeSGh+zXlQIFFBD5LYeiEohQJy0h+7/UM/a0RId7ljqDG+AoS5QuGhFURpVbTfrEHu?##
?@@kA120vzNb9IZwLjDdzECf+WFn3kxEBm/hv1UKhi530dk3r68ypEuJHyVXTDmsiAkcsqg?##
?@@vZDRWiftdRUYNG/Jh48JVwrCWwLWOdvo/+vGF7e6cxRsXnTz7MxIbbMvyYN4ZOXSIVXG?##
?@@+pxeaY/v7gllM+PoO+6FVMkBlTRELhTl3VhYODrnbNM+lyImeaWxCZPLLCguzW4pjTHR?##
?@@i+IIGONb+xHABz6Se/DUUMDRlkrfs72eEJxAjl1tCUHJ4D5/wmoZHUqVYdpIZrPNxG69?##
?@@--END ENCRYPTION: "DIODE_SPICE_BASE_V3", 14 lines
.subckt DIODE_SPICE_DEBUG_V3$10  1 2
.ends DIODE_SPICE_DEBUG_V3$10

.ends DIODE_SPICE_V3$1

.end

